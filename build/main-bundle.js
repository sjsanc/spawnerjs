/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/spawner.ts":
/*!************************!*\
  !*** ./src/spawner.ts ***!
  \************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Spawner = void 0;
var SpawnerElement = /** @class */ (function () {
    function SpawnerElement() {
    }
    return SpawnerElement;
}());
var Spawner = /** @class */ (function () {
    function Spawner() {
        this._context = null;
        this._buildList = [];
        this._store = []; // change to Ref store
        this._proxyTarget = {};
        this._proxy = new Proxy(this._proxyTarget, {});
        // Implement some sort of state, to allow for conditional rendering
    }
    Spawner.prototype.create = function (options) {
        this._context = null;
        this._context = this._create(options);
        return this;
    };
    Spawner.prototype._create = function (options) {
        var element = options["type"]
            ? document.createElement(options["type"])
            : document.createElement("div");
        Object.entries(options).map(function (_a) {
            var key = _a[0], val = _a[1];
            key !== "type" ? (element[key.toString()] = val) : null;
        });
        if (typeof options["ref"] == "string") {
            var reference = options["ref"];
            this._store.push({ reference: reference, element: element });
        }
        return element;
    };
    Spawner.prototype.insertInto = function (target) {
        var _this = this;
        if (this._buildList.length > 0) {
            this._buildList.forEach(function (x) {
                _this._context.append(x);
            });
        }
        target.append(this._context);
        var tempContext = this._context;
        this._context = null;
        this._buildList = [];
        return tempContext;
    };
    Spawner.prototype.append = function (options) {
        this._buildList.push(this._create(options));
        return this;
    };
    Spawner.prototype.get = function (ref) {
        var element = this._getRef(ref);
        if (this._getRef(ref)) {
            return element.element;
        }
        else {
            return undefined;
        }
    };
    Spawner.prototype._getRef = function (ref) {
        return this._store.find(function (x) { return x.reference == ref; }) || null;
    };
    Spawner.prototype.register = function (cb, ref) {
        var elem = typeof ref == "string" ? this._getRef(ref).element : ref;
        if (elem !== "undefined") {
            var observer = new MutationObserver(function (mutations) {
                mutations.forEach(function (mutation) {
                    cb();
                });
            });
            observer.observe(elem, {
                characterData: false,
                attributes: true,
                childList: true,
                subtree: false,
            });
        }
    };
    return Spawner;
}());
exports.Spawner = Spawner;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bhd25lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9zcGF3bmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUtBO0lBQUE7SUFHQSxDQUFDO0lBQUQscUJBQUM7QUFBRCxDQUFDLEFBSEQsSUFHQztBQUVEO0lBT0U7UUFDRSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLHNCQUFzQjtRQUN4QyxJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFL0MsbUVBQW1FO0lBQ3JFLENBQUM7SUFFRCx3QkFBTSxHQUFOLFVBQU8sT0FBNkI7UUFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3RDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVPLHlCQUFPLEdBQWYsVUFBZ0IsT0FBNkI7UUFDM0MsSUFBTSxPQUFPLEdBQWdCLE9BQU8sQ0FBQyxNQUFNLENBQUM7WUFDMUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3pDLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRWxDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsRUFBVTtnQkFBVCxHQUFHLFFBQUEsRUFBRSxHQUFHLFFBQUE7WUFDcEMsR0FBRyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENB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

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
var spawner_1 = __webpack_require__(/*! ./spawner */ "./src/spawner.ts");
// const newEl = new U.element("div", { innerText: "LOL" }).append(document.body);
var spawner = new spawner_1.Spawner();
spawner
    .create({ innerText: "I'm a div" })
    .append({ innerText: "I'm a header", type: "h1" })
    .append({ innerText: "I'm some boring text", type: "p", ref: "pRef" })
    .append({
    innerText: "Click Me",
    type: "button",
    onclick: function () {
        spawner.get("pRef").innerText = "I've changed!";
    },
})
    .insertInto(document.body);
spawner.register(function () {
    console.log("Something about this element changed!");
}, "pRef");
spawner.get("pRef").classList.add("cls"); // "Something about..."
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxxQ0FBb0M7QUFFcEMsa0ZBQWtGO0FBRWxGLElBQU0sT0FBTyxHQUFHLElBQUksaUJBQU8sRUFBRSxDQUFDO0FBRTlCLE9BQU87S0FDSixNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLENBQUM7S0FDbEMsTUFBTSxDQUFDLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7S0FDakQsTUFBTSxDQUFDLEVBQUUsU0FBUyxFQUFFLHNCQUFzQixFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDO0tBQ3JFLE1BQU0sQ0FBQztJQUNOLFNBQVMsRUFBRSxVQUFVO0lBQ3JCLElBQUksRUFBRSxRQUFRO0lBQ2QsT0FBTyxFQUFFO1FBQ1AsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLEdBQUcsZUFBZSxDQUFDO0lBQ2xELENBQUM7Q0FDRixDQUFDO0tBQ0QsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUU3QixPQUFPLENBQUMsUUFBUSxDQUFDO0lBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDO0FBQ3ZELENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUVYLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLHVCQUF1QiJ9
})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGF3bmVyanMvLi9zcmMvc3Bhd25lci50cyIsIndlYnBhY2s6Ly9zcGF3bmVyanMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3Bhd25lcmpzLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBYTtBQUNiLDhDQUE2QyxDQUFDLGNBQWMsRUFBQztBQUM3RCxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsOEJBQThCLHlDQUF5QztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywyQkFBMkIsRUFBRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZUFBZTtBQUNmLDJDQUEyQyx1OEc7Ozs7OztVQ3BGM0M7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7Ozs7OztBQ3RCYTtBQUNiLDhDQUE2QyxDQUFDLGNBQWMsRUFBQztBQUM3RCxnQkFBZ0IsbUJBQU8sQ0FBQyxtQ0FBVztBQUNuQyx1Q0FBdUMsbUJBQW1CO0FBQzFEO0FBQ0E7QUFDQSxhQUFhLHlCQUF5QjtBQUN0QyxhQUFhLHdDQUF3QztBQUNyRCxhQUFhLDREQUE0RDtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QseUNBQXlDO0FBQ3pDLDJDQUEyQywyL0IiLCJmaWxlIjoibWFpbi1idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU3Bhd25lciA9IHZvaWQgMDtcbnZhciBTcGF3bmVyRWxlbWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcGF3bmVyRWxlbWVudCgpIHtcbiAgICB9XG4gICAgcmV0dXJuIFNwYXduZXJFbGVtZW50O1xufSgpKTtcbnZhciBTcGF3bmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwYXduZXIoKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9idWlsZExpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5fc3RvcmUgPSBbXTsgLy8gY2hhbmdlIHRvIFJlZiBzdG9yZVxuICAgICAgICB0aGlzLl9wcm94eVRhcmdldCA9IHt9O1xuICAgICAgICB0aGlzLl9wcm94eSA9IG5ldyBQcm94eSh0aGlzLl9wcm94eVRhcmdldCwge30pO1xuICAgICAgICAvLyBJbXBsZW1lbnQgc29tZSBzb3J0IG9mIHN0YXRlLCB0byBhbGxvdyBmb3IgY29uZGl0aW9uYWwgcmVuZGVyaW5nXG4gICAgfVxuICAgIFNwYXduZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fY3JlYXRlKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXduZXIucHJvdG90eXBlLl9jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IG9wdGlvbnNbXCJ0eXBlXCJdXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQob3B0aW9uc1tcInR5cGVcIl0pXG4gICAgICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBfYVswXSwgdmFsID0gX2FbMV07XG4gICAgICAgICAgICBrZXkgIT09IFwidHlwZVwiID8gKGVsZW1lbnRba2V5LnRvU3RyaW5nKCldID0gdmFsKSA6IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNbXCJyZWZcIl0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZSA9IG9wdGlvbnNbXCJyZWZcIl07XG4gICAgICAgICAgICB0aGlzLl9zdG9yZS5wdXNoKHsgcmVmZXJlbmNlOiByZWZlcmVuY2UsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICBTcGF3bmVyLnByb3RvdHlwZS5pbnNlcnRJbnRvID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5fYnVpbGRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2J1aWxkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2NvbnRleHQuYXBwZW5kKHgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0LmFwcGVuZCh0aGlzLl9jb250ZXh0KTtcbiAgICAgICAgdmFyIHRlbXBDb250ZXh0ID0gdGhpcy5fY29udGV4dDtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2J1aWxkTGlzdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGVtcENvbnRleHQ7XG4gICAgfTtcbiAgICBTcGF3bmVyLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9idWlsZExpc3QucHVzaCh0aGlzLl9jcmVhdGUob3B0aW9ucykpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFNwYXduZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLl9nZXRSZWYocmVmKTtcbiAgICAgICAgaWYgKHRoaXMuX2dldFJlZihyZWYpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5lbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Bhd25lci5wcm90b3R5cGUuX2dldFJlZiA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JlLmZpbmQoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgucmVmZXJlbmNlID09IHJlZjsgfSkgfHwgbnVsbDtcbiAgICB9O1xuICAgIFNwYXduZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGNiLCByZWYpIHtcbiAgICAgICAgdmFyIGVsZW0gPSB0eXBlb2YgcmVmID09IFwic3RyaW5nXCIgPyB0aGlzLl9nZXRSZWYocmVmKS5lbGVtZW50IDogcmVmO1xuICAgICAgICBpZiAoZWxlbSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW0sIHtcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdWJ0cmVlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3Bhd25lcjtcbn0oKSk7XG5leHBvcnRzLlNwYXduZXIgPSBTcGF3bmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzNCaGQyNWxjaTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYklpNHVMM055WXk5emNHRjNibVZ5TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lJN096dEJRVXRCTzBsQlFVRTdTVUZIUVN4RFFVRkRPMGxCUVVRc2NVSkJRVU03UVVGQlJDeERRVUZETEVGQlNFUXNTVUZIUXp0QlFVVkVPMGxCVDBVN1VVRkRSU3hKUVVGSkxFTkJRVU1zVVVGQlVTeEhRVUZITEVsQlFVa3NRMEZCUXp0UlFVTnlRaXhKUVVGSkxFTkJRVU1zVlVGQlZTeEhRVUZITEVWQlFVVXNRMEZCUXp0UlFVTnlRaXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVWQlFVVXNRMEZCUXl4RFFVRkRMSE5DUVVGelFqdFJRVU40UXl4SlFVRkpMRU5CUVVNc1dVRkJXU3hIUVVGSExFVkJRVVVzUTBGQlF6dFJRVU4yUWl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFbEJRVWtzUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4WlFVRlpMRVZCUVVVc1JVRkJSU3hEUVVGRExFTkJRVU03VVVGRkwwTXNiVVZCUVcxRk8wbEJRM0pGTEVOQlFVTTdTVUZGUkN4M1FrRkJUU3hIUVVGT0xGVkJRVThzVDBGQk5rSTdVVUZEYkVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUjBGQlJ5eEpRVUZKTEVOQlFVTTdVVUZEY2tJc1NVRkJTU3hEUVVGRExGRkJRVkVzUjBGQlJ5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8xRkJRM1JETEU5QlFVOHNTVUZCU1N4RFFVRkRPMGxCUTJRc1EwRkJRenRKUVVWUExIbENRVUZQTEVkQlFXWXNWVUZCWjBJc1QwRkJOa0k3VVVGRE0wTXNTVUZCVFN4UFFVRlBMRWRCUVdkQ0xFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTTdXVUZETVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eGhRVUZoTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8xbEJRM3BETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1lVRkJZU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETzFGQlJXeERMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRlZCUVVNc1JVRkJWVHRuUWtGQlZDeEhRVUZITEZGQlFVRXNSVUZCUlN4SFFVRkhMRkZCUVVFN1dVRkRjRU1zUjBGQlJ5eExRVUZMTEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEZGQlFWRXNSVUZCUlN4RFFVRkRMRWRCUVVjc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0UlFVTXhSQ3hEUVVGRExFTkJRVU1zUTBGQlF6dFJRVVZJTEVsQlFVa3NUMEZCVHl4UFFVRlBMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzVVVGQlVTeEZRVUZGTzFsQlEzSkRMRWxCUVVrc1UwRkJVeXhIUVVGWExFOUJRVThzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXp0WlFVTjJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRk5CUVZNc1YwRkJRU3hGUVVGRkxFOUJRVThzVTBGQlFTeEZRVUZGTEVOQlFVTXNRMEZCUXp0VFFVTXhRenRSUVVWRUxFOUJRVThzVDBGQlR5eERRVUZETzBsQlEycENMRU5CUVVNN1NVRkZSQ3cwUWtGQlZTeEhRVUZXTEZWQlFWY3NUVUZCWlR0UlFVRXhRaXhwUWtGWlF6dFJRVmhETEVsQlFVa3NTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhOUVVGTkxFZEJRVWNzUTBGQlF5eEZRVUZGTzFsQlF6bENMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVDBGQlR5eERRVUZETEZWQlFVTXNRMEZCUXp0blFrRkRlRUlzUzBGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRE1VSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1UwRkRTanRSUVVORUxFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8xRkJSVGRDTEVsQlFVa3NWMEZCVnl4SFFVRkhMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU03VVVGRGFFTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSeXhKUVVGSkxFTkJRVU03VVVGRGNrSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1IwRkJSeXhGUVVGRkxFTkJRVU03VVVGRGNrSXNUMEZCVHl4WFFVRlhMRU5CUVVNN1NVRkRja0lzUTBGQlF6dEpRVVZFTEhkQ1FVRk5MRWRCUVU0c1ZVRkJUeXhQUVVFMFFqdFJRVU5xUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU03VVVGRE5VTXNUMEZCVHl4SlFVRkpMRU5CUVVNN1NVRkRaQ3hEUVVGRE8wbEJSVVFzY1VKQlFVY3NSMEZCU0N4VlFVRkpMRWRCUVZjN1VVRkRZaXhKUVVGTkxFOUJRVThzUjBGQlJ5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8xRkJRMnhETEVsQlFVa3NTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJUdFpRVU55UWl4UFFVRlBMRTlCUVU4c1EwRkJReXhQUVVGUExFTkJRVU03VTBGRGVFSTdZVUZCVFR0WlFVTk1MRTlCUVU4c1UwRkJVeXhEUVVGRE8xTkJRMnhDTzBsQlEwZ3NRMEZCUXp0SlFVVlBMSGxDUVVGUExFZEJRV1lzVlVGQlowSXNSMEZCVnp0UlFVTjZRaXhQUVVGUExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRlZCUVVNc1EwRkJReXhKUVVGTExFOUJRVUVzUTBGQlF5eERRVUZETEZOQlFWTXNTVUZCU1N4SFFVRkhMRVZCUVd4Q0xFTkJRV3RDTEVOQlFVTXNTVUZCU1N4SlFVRkpMRU5CUVVNN1NVRkROMFFzUTBGQlF6dEpRVVZFTERCQ1FVRlJMRWRCUVZJc1ZVRkJVeXhGUVVGUExFVkJRVVVzUjBGQlVUdFJRVU40UWl4SlFVRk5MRWxCUVVrc1IwRkJSeXhQUVVGUExFZEJRVWNzU1VGQlNTeFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU03VVVGRGRFVXNTVUZCU1N4SlFVRkpMRXRCUVVzc1YwRkJWeXhGUVVGRk8xbEJRM2hDTEVsQlFVMHNVVUZCVVN4SFFVRkhMRWxCUVVrc1owSkJRV2RDTEVOQlFVTXNWVUZCVlN4VFFVRlRPMmRDUVVOMlJDeFRRVUZUTEVOQlFVTXNUMEZCVHl4RFFVRkRMRlZCUVVNc1VVRkJVVHR2UWtGRGVrSXNSVUZCUlN4RlFVRkZMRU5CUVVNN1owSkJRMUFzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEVEN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOSUxGRkJRVkVzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RlFVRkZPMmRDUVVOeVFpeGhRVUZoTEVWQlFVVXNTMEZCU3p0blFrRkRjRUlzVlVGQlZTeEZRVUZGTEVsQlFVazdaMEpCUTJoQ0xGTkJRVk1zUlVGQlJTeEpRVUZKTzJkQ1FVTm1MRTlCUVU4c1JVRkJSU3hMUVVGTE8yRkJRMllzUTBGQlF5eERRVUZETzFOQlEwbzdTVUZEU0N4RFFVRkRPMGxCUTBnc1kwRkJRenRCUVVGRUxFTkJRVU1zUVVGNFJrUXNTVUYzUmtNN1FVRjRSbGtzTUVKQlFVOGlmUT09IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHNwYXduZXJfMSA9IHJlcXVpcmUoXCIuL3NwYXduZXJcIik7XG4vLyBjb25zdCBuZXdFbCA9IG5ldyBVLmVsZW1lbnQoXCJkaXZcIiwgeyBpbm5lclRleHQ6IFwiTE9MXCIgfSkuYXBwZW5kKGRvY3VtZW50LmJvZHkpO1xudmFyIHNwYXduZXIgPSBuZXcgc3Bhd25lcl8xLlNwYXduZXIoKTtcbnNwYXduZXJcbiAgICAuY3JlYXRlKHsgaW5uZXJUZXh0OiBcIkknbSBhIGRpdlwiIH0pXG4gICAgLmFwcGVuZCh7IGlubmVyVGV4dDogXCJJJ20gYSBoZWFkZXJcIiwgdHlwZTogXCJoMVwiIH0pXG4gICAgLmFwcGVuZCh7IGlubmVyVGV4dDogXCJJJ20gc29tZSBib3JpbmcgdGV4dFwiLCB0eXBlOiBcInBcIiwgcmVmOiBcInBSZWZcIiB9KVxuICAgIC5hcHBlbmQoe1xuICAgIGlubmVyVGV4dDogXCJDbGljayBNZVwiLFxuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICBzcGF3bmVyLmdldChcInBSZWZcIikuaW5uZXJUZXh0ID0gXCJJJ3ZlIGNoYW5nZWQhXCI7XG4gICAgfSxcbn0pXG4gICAgLmluc2VydEludG8oZG9jdW1lbnQuYm9keSk7XG5zcGF3bmVyLnJlZ2lzdGVyKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZyhcIlNvbWV0aGluZyBhYm91dCB0aGlzIGVsZW1lbnQgY2hhbmdlZCFcIik7XG59LCBcInBSZWZcIik7XG5zcGF3bmVyLmdldChcInBSZWZcIikuY2xhc3NMaXN0LmFkZChcImNsc1wiKTsgLy8gXCJTb21ldGhpbmcgYWJvdXQuLi5cIlxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYVc1a1pYZ3Vhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdUxpOXpjbU12YVc1a1pYZ3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJanM3UVVGQlFTeHhRMEZCYjBNN1FVRkZjRU1zYTBaQlFXdEdPMEZCUld4R0xFbEJRVTBzVDBGQlR5eEhRVUZITEVsQlFVa3NhVUpCUVU4c1JVRkJSU3hEUVVGRE8wRkJSVGxDTEU5QlFVODdTMEZEU2l4TlFVRk5MRU5CUVVNc1JVRkJSU3hUUVVGVExFVkJRVVVzVjBGQlZ5eEZRVUZGTEVOQlFVTTdTMEZEYkVNc1RVRkJUU3hEUVVGRExFVkJRVVVzVTBGQlV5eEZRVUZGTEdOQlFXTXNSVUZCUlN4SlFVRkpMRVZCUVVVc1NVRkJTU3hGUVVGRkxFTkJRVU03UzBGRGFrUXNUVUZCVFN4RFFVRkRMRVZCUVVVc1UwRkJVeXhGUVVGRkxITkNRVUZ6UWl4RlFVRkZMRWxCUVVrc1JVRkJSU3hIUVVGSExFVkJRVVVzUjBGQlJ5eEZRVUZGTEUxQlFVMHNSVUZCUlN4RFFVRkRPMHRCUTNKRkxFMUJRVTBzUTBGQlF6dEpRVU5PTEZOQlFWTXNSVUZCUlN4VlFVRlZPMGxCUTNKQ0xFbEJRVWtzUlVGQlJTeFJRVUZSTzBsQlEyUXNUMEZCVHl4RlFVRkZPMUZCUTFBc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4VFFVRlRMRWRCUVVjc1pVRkJaU3hEUVVGRE8wbEJRMnhFTEVOQlFVTTdRMEZEUml4RFFVRkRPMHRCUTBRc1ZVRkJWU3hEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVVTNRaXhQUVVGUExFTkJRVU1zVVVGQlVTeERRVUZETzBsQlEyWXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXgxUTBGQmRVTXNRMEZCUXl4RFFVRkRPMEZCUTNaRUxFTkJRVU1zUlVGQlJTeE5RVUZOTEVOQlFVTXNRMEZCUXp0QlFVVllMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEhWQ1FVRjFRaUo5Il0sInNvdXJjZVJvb3QiOiIifQ==