/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/classes/spawner.ts":
/*!********************************!*\
  !*** ./src/classes/spawner.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, exports) {


var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.SpawnerStore = exports.SpawnChain = exports.Spawner = void 0;
var Spawner = /** @class */ (function () {
    function Spawner(rootEntry) {
        this._refStore = []; // array for storing existing referneces
        this._rootEntry = rootEntry; // document entrypoint
        this._spawnerRootContext = null; // unusued
        this._spawnerRootBuildList = []; // the flat root SpawnChain
    }
    // SpawnStore intialiser
    Spawner.prototype.store = function (initialState) {
        return new SpawnerStore(this, initialState);
    };
    Spawner.prototype.create = function (props, options) {
        if (options !== undefined) {
            return new SpawnChain(this, props, {}, this._rootEntry);
        }
        else {
            return new SpawnChain(this, props, options, this._rootEntry);
        }
    };
    // Saves the reference between a Store prop and DOM element
    Spawner.prototype._saveRef = function (ref) {
        this._refStore.push(ref);
    };
    // Builds the DOM and returns a root element
    Spawner.prototype._build = function (buildList, root) {
        buildList.forEach(function (x) {
            root.append(x);
        });
        return root;
    };
    // Brings compiled SpawnChains from their host class into the Spawner buildchain
    Spawner.prototype._saveToRootBuildList = function (element) {
        this._spawnerRootBuildList = __spreadArray(__spreadArray([], this._spawnerRootBuildList), [element]);
    };
    return Spawner;
}());
exports.Spawner = Spawner;
var SpawnChain = /** @class */ (function () {
    function SpawnChain(parent, conditions, attributes, rootInsertion) {
        this._parentSpawner = parent;
        this._buildList = [];
        this._rootInsertion = rootInsertion;
        this._rootContext = this._create(conditions, attributes);
    }
    // Create an element
    SpawnChain.prototype._create = function (conditions, attributes) {
        var _a;
        if (attributes == undefined)
            attributes = {};
        var element = attributes["type"]
            ? document.createElement(attributes["type"])
            : document.createElement("div");
        var statefulAttributes = [];
        for (var _i = 0, _b = Object.entries(attributes); _i < _b.length; _i++) {
            var _c = _b[_i], key = _c[0], val = _c[1];
            if (typeof val == "object") {
                var stateName = Object.keys(val)[0];
                statefulAttributes.push((_a = {}, _a[key] = stateName, _a)); // { innerText: text }
                this._parentSpawner._saveRef({
                    stateName: stateName,
                    attr: key,
                    element: element,
                });
                element[key] = Object.values(val)[0]; // build element
            }
            else {
                element[key] = val;
            }
        }
        this._parentSpawner._saveToRootBuildList(element);
        return element;
    };
    SpawnChain.prototype.append = function (propList, attributes) {
        var _this = this;
        if (attributes.length == undefined) {
            this._buildList.push(this._create(propList, attributes));
        }
        else {
            attributes.forEach(function (x) {
                _this._buildList.push(_this._create(propList, x));
            });
        }
        return this;
    };
    // Compiles a buildList into a root element
    SpawnChain.prototype._build = function (buildList, rootElement) {
        buildList.forEach(function (x) {
            rootElement.append(x);
        });
        return rootElement;
    };
    // Takes a SpawnChain and joins it to the parent one
    SpawnChain.prototype.nest = function (spawnChain) {
        this._buildList.push(this._build(spawnChain._buildList, spawnChain._rootContext));
        return this;
    };
    // Append the build SpawnChain at the passed argument
    SpawnChain.prototype.renderAt = function (insertionPoint) {
        var builtSpawnChain = this._build(this._buildList, this._rootContext);
        insertionPoint.append(builtSpawnChain);
    };
    // Append the built SpawnChain at the defined Spawner rootInsertion
    SpawnChain.prototype.render = function () {
        var builtSpawnChain = this._build(this._buildList, this._rootContext);
        this._rootInsertion.append(builtSpawnChain);
    };
    // Return the built SpawnChain
    SpawnChain.prototype.return = function () {
        return this._build(this._buildList, this._rootContext);
    };
    return SpawnChain;
}());
exports.SpawnChain = SpawnChain;
var SpawnerStore = /** @class */ (function () {
    function SpawnerStore(parent, initialState) {
        this._proxySetHandler = function (obj, prop, value) {
            obj[prop] = value;
            // this._reRender();
            return true;
        };
        this._state = {};
        this._parent = parent;
        var state = new Proxy(this._state, {
            get: this._proxyGetHandler,
            set: this._proxySetHandler,
        });
        // set the initial State
        Object.entries(initialState).map(function (x) {
            state[x[0]] = x[1];
        });
        this.state = state;
        return this;
    }
    SpawnerStore.prototype._proxyGetHandler = function (obj, prop, receiver) {
        var _a;
        return _a = {}, _a[prop] = obj[prop], _a;
    };
    SpawnerStore.prototype.createState = function (stateObj) {
        var _a = Object.entries(stateObj)[0], key = _a[0], val = _a[1];
        this.state[key] = val;
    };
    SpawnerStore.prototype.setState = function (stateObj) {
        var _this = this;
        var _a = Object.entries(stateObj)[0], key = _a[0], val = _a[1];
        if (key == undefined) {
            throw ReferenceError("Could not find state with key '" + key + "'. Check for typos.");
        }
        else {
            var currentVal = Object.values(this.state[key])[0];
            if (typeof val !== "object") {
                if (typeof currentVal !== typeof val) {
                    throw new TypeError("Cannot assign variable of type '" + typeof val + "' to state container of type '" + typeof currentVal + "'. State type cannot be mutated after initialising.");
                }
                else {
                    this.state[key] = val;
                    this._parent._refStore.forEach(function (ref) {
                        if (ref.stateName == key) {
                            ref.element[ref.attr] = Object.values(_this.state[key])[0];
                        }
                    });
                }
            }
        }
    };
    SpawnerStore.prototype.computeState = function (stateObj, callback) {
        var _a;
        var _b = Object.entries(stateObj)[0], key = _b[0], val = _b[1];
        this.setState((_a = {}, _a[key] = callback(val), _a));
    };
    SpawnerStore.prototype.getState = function (stateObj) {
        var _a = Object.entries(stateObj)[0], key = _a[0], val = _a[1];
        return val;
    };
    SpawnerStore.prototype.snapshot = function () {
        return this._state;
    };
    return SpawnerStore;
}());
exports.SpawnerStore = SpawnerStore;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bhd25lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGFzc2VzL3NwYXduZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtJQU1FLGlCQUFZLFNBQVM7UUFDbkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsQ0FBQyx3Q0FBd0M7UUFDN0QsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsQ0FBQyxzQkFBc0I7UUFDbkQsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVU7UUFDM0MsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEVBQUUsQ0FBQyxDQUFDLDJCQUEyQjtJQUM5RCxDQUFDO0lBRUQsd0JBQXdCO0lBQ3hCLHVCQUFLLEdBQUwsVUFBTSxZQUFpQztRQUNyQyxPQUFPLElBQUksWUFBWSxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBS0Qsd0JBQU0sR0FBTixVQUFPLEtBQVksRUFBRSxPQUE2QjtRQUNoRCxJQUFJLE9BQU8sS0FBSyxTQUFTLEVBQUU7WUFDekIsT0FBTyxJQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDekQ7YUFBTTtZQUNMLE9BQU8sSUFBSSxVQUFVLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQzlEO0lBQ0gsQ0FBQztJQUVELDJEQUEyRDtJQUMzRCwwQkFBUSxHQUFSLFVBQVMsR0FBUTtRQUNmLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFFRCw0Q0FBNEM7SUFDNUMsd0JBQU0sR0FBTixVQUFPLFNBQXdCLEVBQUUsSUFBaUI7UUFDaEQsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFDLENBQUM7WUFDbEIs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

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
var exports = __webpack_exports__;
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/

Object.defineProperty(exports, "__esModule", ({ value: true }));
var spawner_1 = __webpack_require__(/*! ./classes/spawner */ "./src/classes/spawner.ts");
var spawner = new spawner_1.Spawner(document.body);
var store = spawner.store({
    text: "hi!",
});
store.createState({ number: 0 });
var state = store.state;
spawner
    .create([])
    .append([], { type: "p", innerText: state.number })
    .append([], {
    innerText: "Click me",
    type: "button",
    onclick: function () {
        store.setState({ text: "texty" });
    },
})
    .append([], { innerText: "I'm some boring text", type: "p" })
    .nest(spawner.create([], { type: "ul" }).append([], ["List 1", "List 2", "List 3"].map(function (li) { return ({
    type: "li",
    innerText: li,
}); })))
    .renderAt(document.body);
var cb = function (state) {
    return state + 1;
};
store.setState({ number: 1 });
store.computeState(state.number, cb);
setInterval(function () {
    store.computeState(state.number, cb);
}, 1000);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FBNEM7QUFFNUMsSUFBTSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUUzQyxJQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO0lBQzFCLElBQUksRUFBRSxLQUFLO0NBQ1osQ0FBQyxDQUFDO0FBRUgsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBRXpCLElBQUEsS0FBSyxHQUFLLEtBQUssTUFBVixDQUFXO0FBRXhCLE9BQU87S0FDSixNQUFNLENBQUMsRUFBRSxDQUFDO0tBQ1YsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUNsRCxNQUFNLENBQUMsRUFBRSxFQUFFO0lBQ1YsU0FBUyxFQUFFLFVBQVU7SUFDckIsSUFBSSxFQUFFLFFBQVE7SUFDZCxPQUFPLEVBQUU7UUFDUCxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDcEMsQ0FBQztDQUNGLENBQUM7S0FDRCxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLHNCQUFzQixFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQztLQUM1RCxJQUFJLENBQ0gsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQ3ZDLEVBQUUsRUFDRixDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsRUFBRSxJQUFLLE9BQUEsQ0FBQztJQUMxQyxJQUFJLEVBQUUsSUFBSTtJQUNWLFNBQVMsRUFBRSxFQUFFO0NBQ2QsQ0FBQyxFQUh5QyxDQUd6QyxDQUFDLENBQ0osQ0FDRjtLQUNBLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFM0IsSUFBTSxFQUFFLEdBQUcsVUFBQyxLQUFLO0lBQ2YsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ25CLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM5QixLQUFLLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFFckMsV0FBVyxDQUFDO0lBQ1YsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyJ9
})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcGF3bmVyanMvLi9zcmMvY2xhc3Nlcy9zcGF3bmVyLnRzIiwid2VicGFjazovL3NwYXduZXJqcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zcGF3bmVyanMvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFhO0FBQ2I7QUFDQSxvREFBb0QsUUFBUTtBQUM1RDtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0Qsb0JBQW9CLEdBQUcsa0JBQWtCLEdBQUcsZUFBZTtBQUMzRDtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCLG9DQUFvQztBQUNwQyx3Q0FBd0M7QUFDeEMsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxnQkFBZ0I7QUFDekU7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDRCQUE0QixLQUFLO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG9CQUFvQjtBQUNwQiwyQ0FBMkMsK2tQOzs7Ozs7VUMzTDNDO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7Ozs7Ozs7QUN0QmE7QUFDYiw4Q0FBNkMsQ0FBQyxjQUFjLEVBQUM7QUFDN0QsZ0JBQWdCLG1CQUFPLENBQUMsbURBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxtQkFBbUIsWUFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscUNBQXFDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QyxLQUFLO0FBQ0wsQ0FBQztBQUNELGlCQUFpQiwrQ0FBK0M7QUFDaEUsOEJBQThCLGFBQWEsK0RBQStEO0FBQzFHO0FBQ0E7QUFDQSxDQUFDLEVBQUUsRUFBRTtBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDJDQUEyQywydEQiLCJmaWxlIjoibWFpbi1idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNwYXduZXJTdG9yZSA9IGV4cG9ydHMuU3Bhd25DaGFpbiA9IGV4cG9ydHMuU3Bhd25lciA9IHZvaWQgMDtcbnZhciBTcGF3bmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwYXduZXIocm9vdEVudHJ5KSB7XG4gICAgICAgIHRoaXMuX3JlZlN0b3JlID0gW107IC8vIGFycmF5IGZvciBzdG9yaW5nIGV4aXN0aW5nIHJlZmVybmVjZXNcbiAgICAgICAgdGhpcy5fcm9vdEVudHJ5ID0gcm9vdEVudHJ5OyAvLyBkb2N1bWVudCBlbnRyeXBvaW50XG4gICAgICAgIHRoaXMuX3NwYXduZXJSb290Q29udGV4dCA9IG51bGw7IC8vIHVudXN1ZWRcbiAgICAgICAgdGhpcy5fc3Bhd25lclJvb3RCdWlsZExpc3QgPSBbXTsgLy8gdGhlIGZsYXQgcm9vdCBTcGF3bkNoYWluXG4gICAgfVxuICAgIC8vIFNwYXduU3RvcmUgaW50aWFsaXNlclxuICAgIFNwYXduZXIucHJvdG90eXBlLnN0b3JlID0gZnVuY3Rpb24gKGluaXRpYWxTdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNwYXduZXJTdG9yZSh0aGlzLCBpbml0aWFsU3RhdGUpO1xuICAgIH07XG4gICAgU3Bhd25lci5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKHByb3BzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3Bhd25DaGFpbih0aGlzLCBwcm9wcywge30sIHRoaXMuX3Jvb3RFbnRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNwYXduQ2hhaW4odGhpcywgcHJvcHMsIG9wdGlvbnMsIHRoaXMuX3Jvb3RFbnRyeSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFNhdmVzIHRoZSByZWZlcmVuY2UgYmV0d2VlbiBhIFN0b3JlIHByb3AgYW5kIERPTSBlbGVtZW50XG4gICAgU3Bhd25lci5wcm90b3R5cGUuX3NhdmVSZWYgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgIHRoaXMuX3JlZlN0b3JlLnB1c2gocmVmKTtcbiAgICB9O1xuICAgIC8vIEJ1aWxkcyB0aGUgRE9NIGFuZCByZXR1cm5zIGEgcm9vdCBlbGVtZW50XG4gICAgU3Bhd25lci5wcm90b3R5cGUuX2J1aWxkID0gZnVuY3Rpb24gKGJ1aWxkTGlzdCwgcm9vdCkge1xuICAgICAgICBidWlsZExpc3QuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcm9vdC5hcHBlbmQoeCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9O1xuICAgIC8vIEJyaW5ncyBjb21waWxlZCBTcGF3bkNoYWlucyBmcm9tIHRoZWlyIGhvc3QgY2xhc3MgaW50byB0aGUgU3Bhd25lciBidWlsZGNoYWluXG4gICAgU3Bhd25lci5wcm90b3R5cGUuX3NhdmVUb1Jvb3RCdWlsZExpc3QgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9zcGF3bmVyUm9vdEJ1aWxkTGlzdCA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgdGhpcy5fc3Bhd25lclJvb3RCdWlsZExpc3QpLCBbZWxlbWVudF0pO1xuICAgIH07XG4gICAgcmV0dXJuIFNwYXduZXI7XG59KCkpO1xuZXhwb3J0cy5TcGF3bmVyID0gU3Bhd25lcjtcbnZhciBTcGF3bkNoYWluID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwYXduQ2hhaW4ocGFyZW50LCBjb25kaXRpb25zLCBhdHRyaWJ1dGVzLCByb290SW5zZXJ0aW9uKSB7XG4gICAgICAgIHRoaXMuX3BhcmVudFNwYXduZXIgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuX2J1aWxkTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9yb290SW5zZXJ0aW9uID0gcm9vdEluc2VydGlvbjtcbiAgICAgICAgdGhpcy5fcm9vdENvbnRleHQgPSB0aGlzLl9jcmVhdGUoY29uZGl0aW9ucywgYXR0cmlidXRlcyk7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBhbiBlbGVtZW50XG4gICAgU3Bhd25DaGFpbi5wcm90b3R5cGUuX2NyZWF0ZSA9IGZ1bmN0aW9uIChjb25kaXRpb25zLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMgPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgICB2YXIgZWxlbWVudCA9IGF0dHJpYnV0ZXNbXCJ0eXBlXCJdXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXR0cmlidXRlc1tcInR5cGVcIl0pXG4gICAgICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBzdGF0ZWZ1bEF0dHJpYnV0ZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpOyBfaSA8IF9iLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIF9jID0gX2JbX2ldLCBrZXkgPSBfY1swXSwgdmFsID0gX2NbMV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlTmFtZSA9IE9iamVjdC5rZXlzKHZhbClbMF07XG4gICAgICAgICAgICAgICAgc3RhdGVmdWxBdHRyaWJ1dGVzLnB1c2goKF9hID0ge30sIF9hW2tleV0gPSBzdGF0ZU5hbWUsIF9hKSk7IC8vIHsgaW5uZXJUZXh0OiB0ZXh0IH1cbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnRTcGF3bmVyLl9zYXZlUmVmKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVOYW1lOiBzdGF0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGF0dHI6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50W2tleV0gPSBPYmplY3QudmFsdWVzKHZhbClbMF07IC8vIGJ1aWxkIGVsZW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRba2V5XSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYXJlbnRTcGF3bmVyLl9zYXZlVG9Sb290QnVpbGRMaXN0KGVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIFNwYXduQ2hhaW4ucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChwcm9wTGlzdCwgYXR0cmlidXRlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoYXR0cmlidXRlcy5sZW5ndGggPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9idWlsZExpc3QucHVzaCh0aGlzLl9jcmVhdGUocHJvcExpc3QsIGF0dHJpYnV0ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9idWlsZExpc3QucHVzaChfdGhpcy5fY3JlYXRlKHByb3BMaXN0LCB4KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8vIENvbXBpbGVzIGEgYnVpbGRMaXN0IGludG8gYSByb290IGVsZW1lbnRcbiAgICBTcGF3bkNoYWluLnByb3RvdHlwZS5fYnVpbGQgPSBmdW5jdGlvbiAoYnVpbGRMaXN0LCByb290RWxlbWVudCkge1xuICAgICAgICBidWlsZExpc3QuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcm9vdEVsZW1lbnQuYXBwZW5kKHgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJvb3RFbGVtZW50O1xuICAgIH07XG4gICAgLy8gVGFrZXMgYSBTcGF3bkNoYWluIGFuZCBqb2lucyBpdCB0byB0aGUgcGFyZW50IG9uZVxuICAgIFNwYXduQ2hhaW4ucHJvdG90eXBlLm5lc3QgPSBmdW5jdGlvbiAoc3Bhd25DaGFpbikge1xuICAgICAgICB0aGlzLl9idWlsZExpc3QucHVzaCh0aGlzLl9idWlsZChzcGF3bkNoYWluLl9idWlsZExpc3QsIHNwYXduQ2hhaW4uX3Jvb3RDb250ZXh0KSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLy8gQXBwZW5kIHRoZSBidWlsZCBTcGF3bkNoYWluIGF0IHRoZSBwYXNzZWQgYXJndW1lbnRcbiAgICBTcGF3bkNoYWluLnByb3RvdHlwZS5yZW5kZXJBdCA9IGZ1bmN0aW9uIChpbnNlcnRpb25Qb2ludCkge1xuICAgICAgICB2YXIgYnVpbHRTcGF3bkNoYWluID0gdGhpcy5fYnVpbGQodGhpcy5fYnVpbGRMaXN0LCB0aGlzLl9yb290Q29udGV4dCk7XG4gICAgICAgIGluc2VydGlvblBvaW50LmFwcGVuZChidWlsdFNwYXduQ2hhaW4pO1xuICAgIH07XG4gICAgLy8gQXBwZW5kIHRoZSBidWlsdCBTcGF3bkNoYWluIGF0IHRoZSBkZWZpbmVkIFNwYXduZXIgcm9vdEluc2VydGlvblxuICAgIFNwYXduQ2hhaW4ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJ1aWx0U3Bhd25DaGFpbiA9IHRoaXMuX2J1aWxkKHRoaXMuX2J1aWxkTGlzdCwgdGhpcy5fcm9vdENvbnRleHQpO1xuICAgICAgICB0aGlzLl9yb290SW5zZXJ0aW9uLmFwcGVuZChidWlsdFNwYXduQ2hhaW4pO1xuICAgIH07XG4gICAgLy8gUmV0dXJuIHRoZSBidWlsdCBTcGF3bkNoYWluXG4gICAgU3Bhd25DaGFpbi5wcm90b3R5cGUucmV0dXJuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnVpbGQodGhpcy5fYnVpbGRMaXN0LCB0aGlzLl9yb290Q29udGV4dCk7XG4gICAgfTtcbiAgICByZXR1cm4gU3Bhd25DaGFpbjtcbn0oKSk7XG5leHBvcnRzLlNwYXduQ2hhaW4gPSBTcGF3bkNoYWluO1xudmFyIFNwYXduZXJTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcGF3bmVyU3RvcmUocGFyZW50LCBpbml0aWFsU3RhdGUpIHtcbiAgICAgICAgdGhpcy5fcHJveHlTZXRIYW5kbGVyID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgICAgIG9ialtwcm9wXSA9IHZhbHVlO1xuICAgICAgICAgICAgLy8gdGhpcy5fcmVSZW5kZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IHt9O1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHZhciBzdGF0ZSA9IG5ldyBQcm94eSh0aGlzLl9zdGF0ZSwge1xuICAgICAgICAgICAgZ2V0OiB0aGlzLl9wcm94eUdldEhhbmRsZXIsXG4gICAgICAgICAgICBzZXQ6IHRoaXMuX3Byb3h5U2V0SGFuZGxlcixcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHNldCB0aGUgaW5pdGlhbCBTdGF0ZVxuICAgICAgICBPYmplY3QuZW50cmllcyhpbml0aWFsU3RhdGUpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgc3RhdGVbeFswXV0gPSB4WzFdO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgU3Bhd25lclN0b3JlLnByb3RvdHlwZS5fcHJveHlHZXRIYW5kbGVyID0gZnVuY3Rpb24gKG9iaiwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX2EgPSB7fSwgX2FbcHJvcF0gPSBvYmpbcHJvcF0sIF9hO1xuICAgIH07XG4gICAgU3Bhd25lclN0b3JlLnByb3RvdHlwZS5jcmVhdGVTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZU9iaikge1xuICAgICAgICB2YXIgX2EgPSBPYmplY3QuZW50cmllcyhzdGF0ZU9iailbMF0sIGtleSA9IF9hWzBdLCB2YWwgPSBfYVsxXTtcbiAgICAgICAgdGhpcy5zdGF0ZVtrZXldID0gdmFsO1xuICAgIH07XG4gICAgU3Bhd25lclN0b3JlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZU9iaikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSBPYmplY3QuZW50cmllcyhzdGF0ZU9iailbMF0sIGtleSA9IF9hWzBdLCB2YWwgPSBfYVsxXTtcbiAgICAgICAgaWYgKGtleSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IFJlZmVyZW5jZUVycm9yKFwiQ291bGQgbm90IGZpbmQgc3RhdGUgd2l0aCBrZXkgJ1wiICsga2V5ICsgXCInLiBDaGVjayBmb3IgdHlwb3MuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWwgPSBPYmplY3QudmFsdWVzKHRoaXMuc3RhdGVba2V5XSlbMF07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudFZhbCAhPT0gdHlwZW9mIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFzc2lnbiB2YXJpYWJsZSBvZiB0eXBlICdcIiArIHR5cGVvZiB2YWwgKyBcIicgdG8gc3RhdGUgY29udGFpbmVyIG9mIHR5cGUgJ1wiICsgdHlwZW9mIGN1cnJlbnRWYWwgKyBcIicuIFN0YXRlIHR5cGUgY2Fubm90IGJlIG11dGF0ZWQgYWZ0ZXIgaW5pdGlhbGlzaW5nLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVba2V5XSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50Ll9yZWZTdG9yZS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWYuc3RhdGVOYW1lID09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5lbGVtZW50W3JlZi5hdHRyXSA9IE9iamVjdC52YWx1ZXMoX3RoaXMuc3RhdGVba2V5XSlbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Bhd25lclN0b3JlLnByb3RvdHlwZS5jb21wdXRlU3RhdGUgPSBmdW5jdGlvbiAoc3RhdGVPYmosIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIF9iID0gT2JqZWN0LmVudHJpZXMoc3RhdGVPYmopWzBdLCBrZXkgPSBfYlswXSwgdmFsID0gX2JbMV07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKF9hID0ge30sIF9hW2tleV0gPSBjYWxsYmFjayh2YWwpLCBfYSkpO1xuICAgIH07XG4gICAgU3Bhd25lclN0b3JlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZU9iaikge1xuICAgICAgICB2YXIgX2EgPSBPYmplY3QuZW50cmllcyhzdGF0ZU9iailbMF0sIGtleSA9IF9hWzBdLCB2YWwgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuICAgIFNwYXduZXJTdG9yZS5wcm90b3R5cGUuc25hcHNob3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgICB9O1xuICAgIHJldHVybiBTcGF3bmVyU3RvcmU7XG59KCkpO1xuZXhwb3J0cy5TcGF3bmVyU3RvcmUgPSBTcGF3bmVyU3RvcmU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljM0JoZDI1bGNpNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUx5NHVMM055WXk5amJHRnpjMlZ6TDNOd1lYZHVaWEl1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czdPenM3UVVGQlFUdEpRVTFGTEdsQ1FVRlpMRk5CUVZNN1VVRkRia0lzU1VGQlNTeERRVUZETEZOQlFWTXNSMEZCUnl4RlFVRkZMRU5CUVVNc1EwRkJReXgzUTBGQmQwTTdVVUZETjBRc1NVRkJTU3hEUVVGRExGVkJRVlVzUjBGQlJ5eFRRVUZUTEVOQlFVTXNRMEZCUXl4elFrRkJjMEk3VVVGRGJrUXNTVUZCU1N4RFFVRkRMRzFDUVVGdFFpeEhRVUZITEVsQlFVa3NRMEZCUXl4RFFVRkRMRlZCUVZVN1VVRkRNME1zU1VGQlNTeERRVUZETEhGQ1FVRnhRaXhIUVVGSExFVkJRVVVzUTBGQlF5eERRVUZETERKQ1FVRXlRanRKUVVNNVJDeERRVUZETzBsQlJVUXNkMEpCUVhkQ08wbEJRM2hDTEhWQ1FVRkxMRWRCUVV3c1ZVRkJUU3haUVVGcFF6dFJRVU55UXl4UFFVRlBMRWxCUVVrc1dVRkJXU3hEUVVGRExFbEJRVWtzUlVGQlJTeFpRVUZaTEVOQlFVTXNRMEZCUXp0SlFVTTVReXhEUVVGRE8wbEJTMFFzZDBKQlFVMHNSMEZCVGl4VlFVRlBMRXRCUVZrc1JVRkJSU3hQUVVFMlFqdFJRVU5vUkN4SlFVRkpMRTlCUVU4c1MwRkJTeXhUUVVGVExFVkJRVVU3V1VGRGVrSXNUMEZCVHl4SlFVRkpMRlZCUVZVc1EwRkJReXhKUVVGSkxFVkJRVVVzUzBGQlN5eEZRVUZGTEVWQlFVVXNSVUZCUlN4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU03VTBGRGVrUTdZVUZCVFR0WlFVTk1MRTlCUVU4c1NVRkJTU3hWUVVGVkxFTkJRVU1zU1VGQlNTeEZRVUZGTEV0QlFVc3NSVUZCUlN4UFFVRlBMRVZCUVVVc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETzFOQlF6bEVPMGxCUTBnc1EwRkJRenRKUVVWRUxESkVRVUV5UkR0SlFVTXpSQ3d3UWtGQlVTeEhRVUZTTEZWQlFWTXNSMEZCVVR0UlFVTm1MRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRPMGxCUXpOQ0xFTkJRVU03U1VGRlJDdzBRMEZCTkVNN1NVRkROVU1zZDBKQlFVMHNSMEZCVGl4VlFVRlBMRk5CUVhkQ0xFVkJRVVVzU1VGQmFVSTdVVUZEYUVRc1UwRkJVeXhEUVVGRExFOUJRVThzUTBGQlF5eFZRVUZETEVOQlFVTTdXVUZEYkVJc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTnFRaXhEUVVGRExFTkJRVU1zUTBGQlF6dFJRVU5JTEU5QlFVOHNTVUZCU1N4RFFVRkRPMGxCUTJRc1EwRkJRenRKUVVWRUxHZEdRVUZuUmp0SlFVTm9SaXh6UTBGQmIwSXNSMEZCY0VJc1ZVRkJjVUlzVDBGQmIwSTdVVUZEZGtNc1NVRkJTU3hEUVVGRExIRkNRVUZ4UWl4dFEwRkJUeXhKUVVGSkxFTkJRVU1zY1VKQlFYRkNMRWxCUVVVc1QwRkJUeXhGUVVGRExFTkJRVU03U1VGRGVFVXNRMEZCUXp0SlFVTklMR05CUVVNN1FVRkJSQ3hEUVVGRExFRkJPVU5FTEVsQk9FTkRPMEZCT1VOWkxEQkNRVUZQTzBGQlowUndRanRKUVUxRkxHOUNRVUZaTEUxQlFVMHNSVUZCUlN4VlFVRlZMRVZCUVVVc1ZVRkJWU3hGUVVGRkxHRkJRV0U3VVVGRGRrUXNTVUZCU1N4RFFVRkRMR05CUVdNc1IwRkJSeXhOUVVGTkxFTkJRVU03VVVGRE4wSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1IwRkJSeXhGUVVGRkxFTkJRVU03VVVGRGNrSXNTVUZCU1N4RFFVRkRMR05CUVdNc1IwRkJSeXhoUVVGaExFTkJRVU03VVVGRGNFTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1IwRkJSeXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZWQlFWVXNSVUZCUlN4VlFVRlZMRU5CUVVNc1EwRkJRenRKUVVNelJDeERRVUZETzBsQlJVUXNiMEpCUVc5Q08wbEJRMW9zTkVKQlFVOHNSMEZCWml4VlFVTkZMRlZCUVd0Q0xFVkJRMnhDTEZWQlFXZERPenRSUVVWb1F5eEpRVUZKTEZWQlFWVXNTVUZCU1N4VFFVRlRPMWxCUVVVc1ZVRkJWU3hIUVVGSExFVkJRVVVzUTBGQlF6dFJRVVUzUXl4SlFVRk5MRTlCUVU4c1IwRkJaMElzVlVGQlZTeERRVUZETEUxQlFVMHNRMEZCUXp0WlFVTTNReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXl4VlFVRlZMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03V1VGRE5VTXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhoUVVGaExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdVVUZGYkVNc1NVRkJTU3hyUWtGQmEwSXNSMEZCYlVJc1JVRkJSU3hEUVVGRE8xRkJSVFZETEV0QlFYVkNMRlZCUVRCQ0xFVkJRVEZDTEV0QlFVRXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zUlVGQk1VSXNZMEZCTUVJc1JVRkJNVUlzU1VGQk1FSXNSVUZCUlR0WlFVRXhReXhKUVVGQkxGZEJRVlVzUlVGQlZDeEhRVUZITEZGQlFVRXNSVUZCUlN4SFFVRkhMRkZCUVVFN1dVRkRhRUlzU1VGQlNTeFBRVUZQTEVkQlFVY3NTVUZCU1N4UlFVRlJMRVZCUVVVN1owSkJRekZDTEVsQlFVMHNVMEZCVXl4SFFVRkhMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRM1JETEd0Q1FVRnJRaXhEUVVGRExFbEJRVWtzVjBGQlJ5eEhRVUZETEVkQlFVY3NTVUZCUnl4VFFVRlRMRTFCUVVjc1EwRkJReXhEUVVGRExITkNRVUZ6UWp0blFrRkRja1VzU1VGQlNTeERRVUZETEdOQlFXTXNRMEZCUXl4UlFVRlJMRU5CUVVNN2IwSkJRek5DTEZOQlFWTXNSVUZCUlN4VFFVRlRPMjlDUVVOd1FpeEpRVUZKTEVWQlFVVXNSMEZCUnp0dlFrRkRWQ3hQUVVGUExFVkJRVVVzVDBGQlR6dHBRa0ZEYWtJc1EwRkJReXhEUVVGRE8yZENRVU5JTEU5QlFVOHNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zWjBKQlFXZENPMkZCUTNaRU8ybENRVUZOTzJkQ1FVTk1MRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eEhRVUZITEVOQlFVTTdZVUZEY0VJN1UwRkRSanRSUVVWRUxFbEJRVWtzUTBGQlF5eGpRVUZqTEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdVVUZEYkVRc1QwRkJUeXhQUVVGUExFTkJRVU03U1VGRGFrSXNRMEZCUXp0SlFVdEVMREpDUVVGTkxFZEJRVTRzVlVGQlR5eFJRVUZuUWl4RlFVRkZMRlZCUVdkRE8xRkJRWHBFTEdsQ1FWTkRPMUZCVWtNc1NVRkJTU3hWUVVGVkxFTkJRVU1zVFVGQlRTeEpRVUZKTEZOQlFWTXNSVUZCUlR0WlFVTnNReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExGRkJRVkVzUlVGQlJTeFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRPMU5CUXpGRU8yRkJRVTA3V1VGRFRDeFZRVUZWTEVOQlFVTXNUMEZCVHl4RFFVRkRMRlZCUVVNc1EwRkJRenRuUWtGRGJrSXNTMEZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4UlFVRlJMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU5zUkN4RFFVRkRMRU5CUVVNc1EwRkJRenRUUVVOS08xRkJRMFFzVDBGQlR5eEpRVUZKTEVOQlFVTTdTVUZEWkN4RFFVRkRPMGxCUlVRc01rTkJRVEpETzBsQlF6TkRMREpDUVVGTkxFZEJRVTRzVlVGQlR5eFRRVUYzUWl4RlFVRkZMRmRCUVhkQ08xRkJRM1pFTEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1ZVRkJReXhEUVVGRE8xbEJRMnhDTEZkQlFWY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRGVFSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRTQ3hQUVVGUExGZEJRVmNzUTBGQlF6dEpRVU55UWl4RFFVRkRPMGxCUlVRc2IwUkJRVzlFTzBsQlEzQkVMSGxDUVVGSkxFZEJRVW9zVlVGQlN5eFZRVUZ6UWp0UlFVTjZRaXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZEYkVJc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFZRVUZWTEVOQlFVTXNWVUZCVlN4RlFVRkZMRlZCUVZVc1EwRkJReXhaUVVGWkxFTkJRVU1zUTBGRE5VUXNRMEZCUXp0UlFVTkdMRTlCUVU4c1NVRkJTU3hEUVVGRE8wbEJRMlFzUTBGQlF6dEpRVVZFTEhGRVFVRnhSRHRKUVVOeVJDdzJRa0ZCVVN4SFFVRlNMRlZCUVZNc1kwRkJNa0k3VVVGRGJFTXNTVUZCVFN4bFFVRmxMRWRCUVVjc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RlFVRkZMRWxCUVVrc1EwRkJReXhaUVVGWkxFTkJRVU1zUTBGQlF6dFJRVU40UlN4alFVRmpMRU5CUVVNc1RVRkJUU3hEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETzBsQlEzcERMRU5CUVVNN1NVRkZSQ3h0UlVGQmJVVTdTVUZEYmtVc01rSkJRVTBzUjBGQlRqdFJRVU5GTEVsQlFVMHNaVUZCWlN4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNSVUZCUlN4SlFVRkpMRU5CUVVNc1dVRkJXU3hEUVVGRExFTkJRVU03VVVGRGVFVXNTVUZCU1N4RFFVRkRMR05CUVdNc1EwRkJReXhOUVVGTkxFTkJRVU1zWlVGQlpTeERRVUZETEVOQlFVTTdTVUZET1VNc1EwRkJRenRKUVVWRUxEaENRVUU0UWp0SlFVTTVRaXd5UWtGQlRTeEhRVUZPTzFGQlEwVXNUMEZCVHl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVWQlFVVXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRE8wbEJRM3BFTEVOQlFVTTdTVUZEU0N4cFFrRkJRenRCUVVGRUxFTkJRVU1zUVVFelJrUXNTVUV5UmtNN1FVRXpSbGtzWjBOQlFWVTdRVUUyUm5aQ08wbEJTMFVzYzBKQlFWa3NUVUZCWlN4RlFVRkZMRmxCUVdsRE8xRkJhMEk1UkN4eFFrRkJaMElzUjBGQlJ5eFZRVUZETEVkQlFVY3NSVUZCUlN4SlFVRkpMRVZCUVVVc1MwRkJTenRaUVVOc1F5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRWRCUVVjc1MwRkJTeXhEUVVGRE8xbEJRMnhDTEc5Q1FVRnZRanRaUVVOd1FpeFBRVUZQTEVsQlFVa3NRMEZCUXp0UlFVTmtMRU5CUVVNc1EwRkJRenRSUVhKQ1FTeEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRVZCUVVVc1EwRkJRenRSUVVOcVFpeEpRVUZKTEVOQlFVTXNUMEZCVHl4SFFVRkhMRTFCUVUwc1EwRkJRenRSUVVWMFFpeEpRVUZOTEV0QlFVc3NSMEZCY1VJc1NVRkJTU3hMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNSVUZCUlR0WlFVTnlSQ3hIUVVGSExFVkJRVVVzU1VGQlNTeERRVUZETEdkQ1FVRm5RanRaUVVNeFFpeEhRVUZITEVWQlFVVXNTVUZCU1N4RFFVRkRMR2RDUVVGblFqdFRRVU16UWl4RFFVRkRMRU5CUVVNN1VVRkZTQ3gzUWtGQmQwSTdVVUZEZUVJc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1ZVRkJReXhEUVVGRE8xbEJRMnBETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRja0lzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZGU0N4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFdEJRVXNzUTBGQlF6dFJRVU51UWl4UFFVRlBMRWxCUVVrc1EwRkJRenRKUVVOa0xFTkJRVU03U1VGUlJDeDFRMEZCWjBJc1IwRkJhRUlzVlVGQmFVSXNSMEZCUnl4RlFVRkZMRWxCUVVrc1JVRkJSU3hSUVVGUk96dFJRVU5zUXl4blFrRkJVeXhIUVVGRExFbEJRVWtzU1VGQlJ5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVjN1NVRkRMMElzUTBGQlF6dEpRVVZFTEd0RFFVRlhMRWRCUVZnc1ZVRkJaU3hSUVVFeVFqdFJRVU5zUXl4SlFVRkJMRXRCUVdFc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJka01zUjBGQlJ5eFJRVUZCTEVWQlFVVXNSMEZCUnl4UlFVRXJRaXhEUVVGRE8xRkJReTlETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUjBGQlJ5eERRVUZETzBsQlEzaENMRU5CUVVNN1NVRkZSQ3dyUWtGQlVTeEhRVUZTTEZWQlFWa3NVVUZCTWtJN1VVRkJka01zYVVKQmVVSkRPMUZCZUVKUExFbEJRVUVzUzBGQllTeE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUYyUXl4SFFVRkhMRkZCUVVFc1JVRkJSU3hIUVVGSExGRkJRU3RDTEVOQlFVTTdVVUZGTDBNc1NVRkJTU3hIUVVGSExFbEJRVWtzVTBGQlV5eEZRVUZGTzFsQlEzQkNMRTFCUVUwc1kwRkJZeXhEUVVOc1FpeHZRMEZCYTBNc1IwRkJSeXgzUWtGQmNVSXNRMEZETTBRc1EwRkJRenRUUVVOSU8yRkJRVTA3V1VGRFRDeEpRVUZOTEZWQlFWVXNSMEZCUnl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVVZ5UkN4SlFVRkpMRTlCUVU4c1IwRkJSeXhMUVVGTExGRkJRVkVzUlVGQlJUdG5Ra0ZETTBJc1NVRkJTU3hQUVVGUExGVkJRVlVzUzBGQlN5eFBRVUZQTEVkQlFVY3NSVUZCUlR0dlFrRkRjRU1zVFVGQlRTeEpRVUZKTEZOQlFWTXNRMEZEYWtJc2NVTkJRVzFETEU5QlFVOHNSMEZCUnl4elEwRkJhVU1zVDBGQlR5eFZRVUZWTEhkRVFVRnhSQ3hEUVVOeVNpeERRVUZETzJsQ1FVTklPM0ZDUVVGTk8yOUNRVU5NTEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUjBGQlJ5eERRVUZETzI5Q1FVTjBRaXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1ZVRkJReXhIUVVGSE8zZENRVU5xUXl4SlFVRkpMRWRCUVVjc1EwRkJReXhUUVVGVExFbEJRVWtzUjBGQlJ5eEZRVUZGT3pSQ1FVTjRRaXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSeXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0NVFrRkRNMFE3YjBKQlEwZ3NRMEZCUXl4RFFVRkRMRU5CUVVNN2FVSkJRMG83WVVGRFJqdFRRVU5HTzBsQlEwZ3NRMEZCUXp0SlFVVkVMRzFEUVVGWkxFZEJRVm9zVlVGQllTeFJRVUZSTEVWQlFVVXNVVUZCVVRzN1VVRkRka0lzU1VGQlFTeExRVUZoTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFYWkRMRWRCUVVjc1VVRkJRU3hGUVVGRkxFZEJRVWNzVVVGQkswSXNRMEZCUXp0UlFVTXZReXhKUVVGSkxFTkJRVU1zVVVGQlVTeFhRVUZITEVkQlFVTXNSMEZCUnl4SlFVRkhMRkZCUVZFc1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlJ5eERRVUZETzBsQlF6RkRMRU5CUVVNN1NVRkZSQ3dyUWtGQlVTeEhRVUZTTEZWQlFWa3NVVUZCTWtJN1VVRkRMMElzU1VGQlFTeExRVUZoTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFYWkRMRWRCUVVjc1VVRkJRU3hGUVVGRkxFZEJRVWNzVVVGQkswSXNRMEZCUXp0UlFVTXZReXhQUVVGUExFZEJRVWNzUTBGQlF6dEpRVU5pTEVOQlFVTTdTVUZGUkN3clFrRkJVU3hIUVVGU08xRkJRMFVzVDBGQlR5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRPMGxCUTNKQ0xFTkJRVU03U1VGRFNDeHRRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRTVSVVFzU1VFNFJVTTdRVUU1UlZrc2IwTkJRVmtpZlE9PSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBzcGF3bmVyXzEgPSByZXF1aXJlKFwiLi9jbGFzc2VzL3NwYXduZXJcIik7XG52YXIgc3Bhd25lciA9IG5ldyBzcGF3bmVyXzEuU3Bhd25lcihkb2N1bWVudC5ib2R5KTtcbnZhciBzdG9yZSA9IHNwYXduZXIuc3RvcmUoe1xuICAgIHRleHQ6IFwiaGkhXCIsXG59KTtcbnN0b3JlLmNyZWF0ZVN0YXRlKHsgbnVtYmVyOiAwIH0pO1xudmFyIHN0YXRlID0gc3RvcmUuc3RhdGU7XG5zcGF3bmVyXG4gICAgLmNyZWF0ZShbXSlcbiAgICAuYXBwZW5kKFtdLCB7IHR5cGU6IFwicFwiLCBpbm5lclRleHQ6IHN0YXRlLm51bWJlciB9KVxuICAgIC5hcHBlbmQoW10sIHtcbiAgICBpbm5lclRleHQ6IFwiQ2xpY2sgbWVcIixcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3RvcmUuc2V0U3RhdGUoeyB0ZXh0OiBcInRleHR5XCIgfSk7XG4gICAgfSxcbn0pXG4gICAgLmFwcGVuZChbXSwgeyBpbm5lclRleHQ6IFwiSSdtIHNvbWUgYm9yaW5nIHRleHRcIiwgdHlwZTogXCJwXCIgfSlcbiAgICAubmVzdChzcGF3bmVyLmNyZWF0ZShbXSwgeyB0eXBlOiBcInVsXCIgfSkuYXBwZW5kKFtdLCBbXCJMaXN0IDFcIiwgXCJMaXN0IDJcIiwgXCJMaXN0IDNcIl0ubWFwKGZ1bmN0aW9uIChsaSkgeyByZXR1cm4gKHtcbiAgICB0eXBlOiBcImxpXCIsXG4gICAgaW5uZXJUZXh0OiBsaSxcbn0pOyB9KSkpXG4gICAgLnJlbmRlckF0KGRvY3VtZW50LmJvZHkpO1xudmFyIGNiID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlICsgMTtcbn07XG5zdG9yZS5zZXRTdGF0ZSh7IG51bWJlcjogMSB9KTtcbnN0b3JlLmNvbXB1dGVTdGF0ZShzdGF0ZS5udW1iZXIsIGNiKTtcbnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICBzdG9yZS5jb21wdXRlU3RhdGUoc3RhdGUubnVtYmVyLCBjYik7XG59LCAxMDAwKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFXNWtaWGd1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SXVMaTl6Y21NdmFXNWtaWGd1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN1FVRkJRU3cyUTBGQk5FTTdRVUZGTlVNc1NVRkJUU3hQUVVGUExFZEJRVWNzU1VGQlNTeHBRa0ZCVHl4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dEJRVVV6UXl4SlFVRk5MRXRCUVVzc1IwRkJSeXhQUVVGUExFTkJRVU1zUzBGQlN5eERRVUZETzBsQlF6RkNMRWxCUVVrc1JVRkJSU3hMUVVGTE8wTkJRMW9zUTBGQlF5eERRVUZETzBGQlJVZ3NTMEZCU3l4RFFVRkRMRmRCUVZjc1EwRkJReXhGUVVGRkxFMUJRVTBzUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRPMEZCUlhwQ0xFbEJRVUVzUzBGQlN5eEhRVUZMTEV0QlFVc3NUVUZCVml4RFFVRlhPMEZCUlhoQ0xFOUJRVTg3UzBGRFNpeE5RVUZOTEVOQlFVTXNSVUZCUlN4RFFVRkRPMHRCUTFZc1RVRkJUU3hEUVVGRExFVkJRVVVzUlVGQlJTeEZRVUZGTEVsQlFVa3NSVUZCUlN4SFFVRkhMRVZCUVVVc1UwRkJVeXhGUVVGRkxFdEJRVXNzUTBGQlF5eE5RVUZOTEVWQlFVVXNRMEZCUXp0TFFVTnNSQ3hOUVVGTkxFTkJRVU1zUlVGQlJTeEZRVUZGTzBsQlExWXNVMEZCVXl4RlFVRkZMRlZCUVZVN1NVRkRja0lzU1VGQlNTeEZRVUZGTEZGQlFWRTdTVUZEWkN4UFFVRlBMRVZCUVVVN1VVRkRVQ3hMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMRTlCUVU4c1JVRkJSU3hEUVVGRExFTkJRVU03U1VGRGNFTXNRMEZCUXp0RFFVTkdMRU5CUVVNN1MwRkRSQ3hOUVVGTkxFTkJRVU1zUlVGQlJTeEZRVUZGTEVWQlFVVXNVMEZCVXl4RlFVRkZMSE5DUVVGelFpeEZRVUZGTEVsQlFVa3NSVUZCUlN4SFFVRkhMRVZCUVVVc1EwRkJRenRMUVVNMVJDeEpRVUZKTEVOQlEwZ3NUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhGUVVGRkxFVkJRVVVzUlVGQlJTeEpRVUZKTEVWQlFVVXNTVUZCU1N4RlFVRkZMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRM1pETEVWQlFVVXNSVUZEUml4RFFVRkRMRkZCUVZFc1JVRkJSU3hSUVVGUkxFVkJRVVVzVVVGQlVTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRlZCUVVNc1JVRkJSU3hKUVVGTExFOUJRVUVzUTBGQlF6dEpRVU14UXl4SlFVRkpMRVZCUVVVc1NVRkJTVHRKUVVOV0xGTkJRVk1zUlVGQlJTeEZRVUZGTzBOQlEyUXNRMEZCUXl4RlFVaDVReXhEUVVkNlF5eERRVUZETEVOQlEwb3NRMEZEUmp0TFFVTkJMRkZCUVZFc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZGTTBJc1NVRkJUU3hGUVVGRkxFZEJRVWNzVlVGQlF5eExRVUZMTzBsQlEyWXNUMEZCVHl4TFFVRkxMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJRMjVDTEVOQlFVTXNRMEZCUXp0QlFVVkdMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zUlVGQlJTeE5RVUZOTEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJRenRCUVVNNVFpeExRVUZMTEVOQlFVTXNXVUZCV1N4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFVkJRVVVzUlVGQlJTeERRVUZETEVOQlFVTTdRVUZGY2tNc1YwRkJWeXhEUVVGRE8wbEJRMVlzUzBGQlN5eERRVUZETEZsQlFWa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1RVRkJUU3hGUVVGRkxFVkJRVVVzUTBGQlF5eERRVUZETzBGQlEzWkRMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlF5SjkiXSwic291cmNlUm9vdCI6IiJ9